
<%- include('userpartials/userhead.ejs') %>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

<section style="background-color: #eee; ">
  <div class="container py-5"  >
   

    <div class="row"  style="margin-top: 50px;">
      <div class="col-lg-4">
        <% if (userAddress == null || findaddress.length == 0 ) { %>
          <div class="alert alert-danger" role="alert" style="width: 250px; height: 60px;">
            Please Add Address!
          </div>
          <% }else{ %>
            <% for(let i =0;i<findaddress.length;i++){ %>

       
        <div class="card mb-4">
         
          <div class="card-body text-center">
            
            <h5 class="my-3">Address <a href="/delete/<%- findaddress[i]._id %>">
              <i class="material-icons pull-right">delete</i>
          </a></h5>
           
            <p><%= findaddress[i].name %> </p>
            <p><%= findaddress[i].city %> </p>
            <p><%= findaddress[i].state %> </p>
            <p><%= findaddress[i].phone %> </p>
            <p><%= findaddress[i].pin %> </p>  
            <p><%= findaddress[i].address %> </p>  
  
          </div>
          <button type="button" class="btn btn-outline-primary ms-1" data-bs-toggle="modal"
          data-bs-target="#Edit<%= findaddress[i].id %>"  >Update</button>
          
           
        </div>



        <div class="modal fade"  style="margin-top: 70px;" id="Edit<%=findaddress[i].id %>" tabindex="-1" aria-labelledby="aria-labelledby" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="model-title">Update</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
     <!---------------------------------------------------------------------------->
                <form class="row g-3 needs-validation" novalidate action="/editaddress/<%=findaddress[i]._id%> " method="post">
                  <div class="col-md-6">
                    <label for="validationCustom01" class="form-label">Name</label>
                    <input type="text" class="form-control" name="name" id="validationCustom01" value="<%= findaddress[i].name %> " required>
                    <div class="valid-feedback">
                      Looks good!
                    </div>
                  </div>
                  <div class="col-md-6">
                    <label for="validationCustom01" class="form-label">Phone</label>
                    <input type="tel" class="form-control" name="phone" id="validationCustom01" value="<%= findaddress[i].phone %> " required>
                    <div class="valid-feedback">
                      Looks good!
                    </div>
                  </div>
                 
                  <div class="col-md-12">
                  
                </div>
                <label for="validationCustom03" class="form-label">Address</label>
                    <input type="text" class="form-control" id="validationCustom03" value="<%= findaddress[i].address %> " required name="addres">
               
                  <div class="col-md-6">
                    <label for="validationCustom03" class="form-label">Town</label>
                    <input type="text" class="form-control" id="validationCustom03" required name="city" value="<%= findaddress[i].city %> ">
                    <div class="invalid-feedback">
                      Please provide a valid city.
                    </div>
                  </div>
                  <div class="col-md-6">
                    <label for="validationCustom03" class="form-label">State</label>
                    <input type="text" class="form-control" id="validationCustom03" required name="state" value="<%= findaddress[i].state %> ">
                    <div class="invalid-feedback">
                      Please provide a valid city.
                    </div>
                  </div>
                  <div class="col-md-3">
                    <label for="validationCustom05" class="form-label">Pin</label>
                    <input type="number" placeholder="<%= findaddress[i].pin %>" class="form-control" id="validationCustom05" required name="pin" value="<%= findaddress[i].pin %>">
                    <div class="invalid-feedback">
                      Please provide a valid zip.
                    </div>
                  </div>
                  <button type="submit"  class="btn btn-primary">Save changes</button>
               
                </form>
      <!----------------------------------------------------------------------------------> 
              </div>
              <div class="modal-footer"> 
              </div>
            </div>
          </div>
        </div>
    
        
     
    <!--edit modal ending---------------------------------------------------------------------------->    
    
    


        <% } %>  
        <% } %>
      </div>
      <div class="col-lg-8">
        <div class="card mb-4">
          <div class="card-body">
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">Full Name</p>
              </div>
              <div class="col-sm-9">
                <p class="text-muted mb-0"><%=user.first_name%><%=user.last_name%></p>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">Email</p>
              </div>
              <div class="col-sm-9">
                <p class="text-muted mb-0"><%=user.email%></p>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">Phone</p>
              </div>
              <div class="col-sm-9">
                <p class="text-muted mb-0"><%=user.phone%></p>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">Mobile</p>
              </div>
              <div class="col-sm-9">
                <p class="text-muted mb-0"><%=user.phone%></p>
              </div>
            </div>
            <a  type="button" style="color: white;" id="editbtn1" class="btn btn-primary js-show-modal1 pull-right ">Add Address</a>

          </div>
        </div>
      
         
        
        </div>
      </div>
    </div>
  </div>
  
           


  <div class="wrap-modal1 js-modal1 p-t-60 p-b-20">
    <div class="overlay-modal1 js-hide-modal1"></div>

    <div class="container">
        <div class="bg0 p-t-60 p-b-30 p-lr-15-lg how-pos3-parent">
            <button class="how-pos3 hov3 trans-04 js-hide-modal1">
                <img src="/user/images/icons/icon-close.png" alt="CLOSE">
            </button>
            <div class="container">
                <form id="addressform"  autocomplete="off">
                    <!-- 2 column grid layout with text inputs for the first and last names -->
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="formName">Name</label>
                            <input type="text" class="form-control" id="formName" name="name"
                                placeholder="Enter your name" onchange="validateForm()">

                            <small class="form-text text-danger" id="nameError"></small>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="formEmail">Email</label>
                            <input type="email" class="form-control" id="formEmail" name="email"
                                placeholder="Enter your email" onchange="validateForm()">
                            <small class="form-text text-danger" id="emailError"></small>

                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="formPhone">Phone</label>
                            <input type="number" class="form-control" id="formPhone" name="phone"
                                placeholder="Enter your phone number" onchange="validateForm()">
                            <small class="form-text text-danger" id="phoneError"></small>

                        </div>
                        <div class="form-group col-md-6">
                            <label for="formState">State</label>
                            <input type="text" class="form-control" id="formState" name="state"
                                placeholder="Enter your state" onchange="validateForm()">
                            <small class="form-text text-danger" id="stateError"></small>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="formCity">City</label>
                            <input type="text" class="form-control" id="formCity" name="city"
                                placeholder="Enter your city" onchange="validateForm()">
                            <small class="form-text text-danger" id="cityError"></small>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="formPin">Pin</label>
                            <input type="number" class="form-control" id="formPin" name="pin"
                                placeholder="Enter your pin code" onchange="validateForm()">
                            <small class="form-text text-danger" id="pinError"></small>

                        </div>
                    </div>
                    <div class="form-group">
                        <label for="formAddress">Address</label>
                        <textarea class="form-control" id="formAddress" name="address" rows="3"
                            placeholder="Enter your address" onchange="validateForm()"></textarea>
                        <small class="form-text text-danger" id="addressError"></small>
                    </div>
                    <button type="button" id="savebtn" style="display: none;"
                        class="btn btn-success btn-block mt-3">Save</button>
                </form>
            </div>
        </div>
    </div>
</div>



</section>


<!-- Back to top -->
<div class="btn-back-to-top" id="myBtn">
  <span class="symbol-btn-back-to-top">
      <i class="zmdi zmdi-chevron-up"></i>
  </span>
</div>

<!--===============================================================================================-->
<script src="/user/vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="/user/vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="/user/vendor/bootstrap/js/popper.js"></script>
<script src="/user/vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="/user/vendor/select2/select2.min.js"></script>
<script>
  $(".js-select2").each(function () {
      $(this).select2({
          minimumResultsForSearch: 20,
          dropdownParent: $(this).next('.dropDownSelect2')
      });
  })
</script>
<!--===============================================================================================-->
<script src="/user/vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
<!--===============================================================================================-->
<script src="/user/vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>





<!--===============================================================================================-->
<script src="/user/js/main.js"></script>

<script src="/user/js/profile.js"></script>


<%- include('userpartials/userfooter.ejs') %>





</body>

</html>